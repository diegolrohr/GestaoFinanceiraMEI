<script>
    var reemprime = false;
    function inputHiddenId(id, value) {
        var attr = { "type": "hidden", "id": id, "name": id, "value": value };

        return createElem("input", attr);
    };

    function submitButton() {
        var attr = { "type": "submit", "class": "btn btn-narrow valid", "id": "" }

        return createElem("button", attr,
            createElem("i", { "class": "material-icons" }, "print")
        );
    };

    function createForm(row) {
        var formAttr = {
            "method": "GET",
            "action": "@Url.Action("Edit", "Cnab")" + "/{" + row.id + "}",
            "class": "cnabForm valign-wrapper right col s12"
        };
        return createElem("form", formAttr,[
            inputHiddenId("contaReceberId", row.contaReceberId),
            inputHiddenId("contaBancariaId", row.contaBancariaId),
            submitButton()
        ]);
    };

    function fnImprimirBoletoCnab(data, type, row, meta) {
        debugger;
        return createForm(row).outerHTML;
    };

    $(document).off("submit", "form.cnabForm");
    $(document).on("submit", "form.cnabForm", function (e) {
        var that = $(this);
        that.loading("start");
        e.preventDefault();

        var contaBancariaId = $("#bancoId").val();
        if (that.serializeObject().contaBancariaId != "undefined")
            contaBancariaId = that.serializeObject().contaBancariaId;

        if (!that.valid()) {
            that.loading("stop");
            return false;
        }
        else {
            fnImprimirBoleto(that.serializeObject().contaReceberId, contaBancariaId, that);
        }
    });
</script>