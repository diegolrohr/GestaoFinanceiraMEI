<script>
    function fnAtualizarPeriodo(periodo) {
        $$$.loading.start();

        var today = new Date();
        var lastMonth = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());
        $$$._.dataInicial.set(lastMonth);
        $$$._.dataFinal.set(today);

        switch (periodo) {
            case "dia":
                $$$._.dataInicial.set(today);
                $$$._.dataFinal.set(today);
                break;
            case "semana":
                var lastWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);
                $$$._.dataInicial.set(lastWeek);
                $$$._.dataFinal.set(today);
                break;
            case "mes":
                var lastMonth = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());
                $$$._.dataInicial.set(lastMonth);
                $$$._.dataFinal.set(today);
                break;
            default:
                break;
        }
        var dataInicialDisplay = moment($('input#dataInicial').val(), "DD/MM/YYYY");
        var dataInicial = moment(dataInicialDisplay).format('YYYY-MM-DD');
        var dataFinalDisplay = moment($('input#dataFinal').val(), "DD/MM/YYYY");
        var dataFinal = moment(dataFinalDisplay).format('YYYY-MM-DD');

        if (dataInicial > dataFinal) {
            dataInicial = moment(dataFinalDisplay).format('YYYY-MM-DD');
            dataFinal = moment(dataInicialDisplay).format('YYYY-MM-DD');
            $('input#dataInicial').val(moment(dataInicial).format("DD/MM/YYYY"));
            $('input#dataFinal').val(moment(dataFinal).format("DD/MM/YYYY"));
        }
        if ($('input#dataInicial').val() == "" || $('input#dataFinal').val() == "") {
            $$$.toast("Informe a data inicial e a data final.", 'error');
        }

        $$$.loading.stop();
        fnGetSaldos(dataFinal, dataInicial);
        $$$._.fly01chart.refresh();
    }
</script>