<script>
    function getStatusConta() {
        return $('#fly01mdlfrm #statusContaBancaria').val();
    }

    function getQueryStringFilterBaixas() {
        return "@Url.Action("ListContaBaixas")?contaFinanceiraId=" + $('#fly01mdlfrm #id').val()
    }

    function getContaBaixas() {
        $('#fly01mdlfrm #datatableContaBaixas').DataTable().destroy();

        table = $('#fly01mdlfrm #datatableContaBaixas').DataTable({
            bSort: true,
            bLengthChange: false,
            processing: true,
            serverSide: true,
            orderCellsTop: true,
            responsive: true,
            //pageLength: 10,
            paging: false,
            info: false,
            responsive: true,
            ajax: {
                url: getQueryStringFilterBaixas(),
                cache: false,
                "dataSrc": function (json) {

                    if (json.success === false)
                        alert(json.message);

                    return json.data;
                }
            },
            sDom: "<\"H\">rt<\"F\"ip>",
            displayStart: 0,
            order: [],
            searching: false,
            columns: [
                { data: "data", orderable: false },
                { data: "valor", orderable: false },
                { data: "contaBancaria_NomeConta", orderable: false },
                { data: "observacao", orderable: false }
            ]
        });
    }

    function fnFormReadyVisualizar() {
        if (getStatusConta() == "BaixadoParcialmente" || getStatusConta() == "Pago") {
            $('#fly01mdlfrm #relacaoBaixaLabelField').show();
            $('#fly01mdlfrm #btnListaBaixasField').show();
            $('#fly01mdlfrm #datatableContaBaixasField').show();
            getContaBaixas();
            $('#fly01mdlfrm #btnListaBaixasField').hide();
        }
        else {
            $('#fly01mdlfrm #relacaoBaixaLabelField').hide();
            $('#fly01mdlfrm #btnListaBaixasField').hide();
            $('#fly01mdlfrm #datatableContaBaixasField').hide();
        }
    }
</script>