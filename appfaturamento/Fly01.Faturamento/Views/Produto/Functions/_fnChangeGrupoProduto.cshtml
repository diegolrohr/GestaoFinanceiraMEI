<script>
	function fnChangeGrupoProduto(event, data) {
		if (data.item.id == "")
			return;

		$('body').removeClass('loaded');

		$.ajax({
			url: '@Url.Action("Json", "GrupoProduto")',
			type: "GET",
			data: { id: data.item.id }
		})
		.done(function (data) {
			$('body').addClass('loaded');
			$('select#tipoProduto').val(data.tipoProduto);
			$('select#tipoProduto').material_select();
			if (data.unidadeMedidaId != undefined) {
				$('#unidadeMedidaId').val(data.unidadeMedidaId);
				$('#unidadeMedidaDescricao').val(data.unidadeMedida.descricao);
			}
			if (data.ncmId != undefined) {
				$('#ncmId').val(data.ncmId);
				$('#ncmDescricao').val(data.ncm.descricao);
				$('input#cestId').removeAttr('disabled');
				$('input#cestDescricao').removeAttr('disabled');
			}
			$('#aliquotaIpi').val(data.aliquotaIpi);
			fly01.core.updateTextFields();
		})
		.fail(function (jqxhr, textStatus, error) {
			var err = 'Ocorreu um erro na requisição: ' + textStatus + ", " + error;
			fly01.toast(err, "error");
			$('body').addClass('loaded');
		});
	}

</script>