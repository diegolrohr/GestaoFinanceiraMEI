<script>
    var arrItems = [];
    function fnBaixarXMLNFeZip() {

        debugger;
        $$$._.fly01dt.context[0].json.data.forEach(function (item) {
            if (item.selected) {
                arrItems.push(item.id);
            }
        });

        $$$.loading.start();
        $.ajax({
            url: '@Url.Action("BaixarXMLs", "NFe")',
            type: "POST",
            data: { ids : arrItems},
            success: function (data) {
                debugger;
                if (data.success) {
                    $$$.loading.stop();
                    location.href = data.fileZip;
                }
            }
        })
        .fail(function (jqxhr, textStatus, error) {
            var err = 'Ocorreu um erro na requisição: ' + textStatus + ", " + error;
            $$$.toast(err, "error");
            $$$.loading.stop();
        });
    }
</script>