<script>
    function resolveRanges(groupType) {
        var startdate = moment();
        var finalDate = moment();

        switch (groupType) {
            case '1': //dia
            default:
                finalDate = moment(startdate).add(3, 'months');
                break;
            case '3': //mes
                finalDate = moment(startdate).add(24, 'months');
                break;
            case '4': //trimestre
                finalDate = moment(startdate).add(36, 'months');
                break;
            case '5': //semestre
                finalDate = moment(startdate).add(48, 'months');
                break;
            case '6': //ano
                finalDate = moment(startdate).add(60, 'months');
                break;
        }

        var calculateFinalDate = new Date(moment(finalDate).format('YYYY'), moment(finalDate).format('MM'), moment(finalDate).format('D'));

        var selectedFinalDate = moment(fly01._.dataFinal.pickadate("picker").get(), 'DD/MM/YYYY');
        if (selectedFinalDate > finalDate)
            fly01._.dataFinal.pickadate("picker").set('select', calculateFinalDate);

        fly01._.dataFinal.pickadate("picker").set('max', calculateFinalDate);
    }

    function fnAtualizaAgrupamento(type) {
        $("input#groupType").val(type);
        resolveRanges(type);
        fnAtualizar();
    }
</script>