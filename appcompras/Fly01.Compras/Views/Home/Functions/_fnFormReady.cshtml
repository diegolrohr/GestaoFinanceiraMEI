<script>
    function refreshDash(updateDt) {
        $$$._.chartPagamento.refresh();
        $$$._.chartStatus.refresh();
        $$$._.chartCategoria.refresh();
        if (updateDt) {
            $$$._.mProd.refresh();
            $$$._.mForn.refresh();
        }
    }

    function fnFormReady() {
        let date = $$$._.mesPicker.pickamonth("picker").get("select");
        var firstDay = new Date(date.year, date.month, 1);
        $("#btnPedido").click();
        $("#dataInicial").val(moment(firstDay).format('YYYY-MM-DD'));

        if ($('#emiteNotaFiscal').val() == "True") {
            verificaParametrosTributarios();
        }
    }

    function verificaParametrosTributarios() {
        var url = '@Url.Action("ExisteParametroSalvo", "ParametroTributario")';
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: url,
            success: function success(data) {
                if (!data.existeParametro) {
                    $$$.modal("@Url.Action("FormModal", "AliquotaSimplesNacional", new { isOnCadastroParametros = "false" })");
                }
            },
            error: function error(jXHR, textStatus) {
                $$$.toast(textStatus, "error");
                $$$.loading.stop();
            }
        });
    }

</script>