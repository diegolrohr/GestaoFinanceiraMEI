
<script>
    @Html.Partial("Functions/_fnImprimir");
    debugger;
    function fnImprimirCPCR() {

        var countValues = 0;
        var valueItens = [$('input#dataEmissaoInicial').val(), $('input#dataEmissaoFinal').val(), $('input#dataInicial').val(), $('input#dataFinal').val(), $("#clienteId").val(), $("#formaPagamentoId").val(), $("#condicaoParcelamentoId").val(), $("#categoriaId").val(), $("#centroCustoId").val()];
        valueItens.forEach(function (item) {
            if (item !== "") {
                countValues ++;
                return false;
            }
        });

        if (countValues === 0)
            $$$.toast("Inform ao menos um parametro para continuar.", 'error');
        else {
            var dataEmissaoInicialDisplay = moment($('input#dataEmissaoInicial').val(), "DD/MM/YYYY");
            var dataEmissaoInicial = moment(dataEmissaoInicialDisplay).format('YYYY-MM-DD');

            var dataEmissaoFinalDisplay = moment($('input#dataEmissaoFinal').val(), "DD/MM/YYYY");
            var dataEmissaoFinal = moment(dataEmissaoFinalDisplay).format('YYYY-MM-DD');

            var dataInicialDisplay = moment($('input#dataInicial').val(), "DD/MM/YYYY");
            var dataInicial = moment(dataInicialDisplay).format('YYYY-MM-DD');

            var dataFinalDisplay = moment($('input#dataFinal').val(), "DD/MM/YYYY");
            var dataFinal = moment(dataFinalDisplay).format('YYYY-MM-DD');

            var clienteId = $("#clienteId").val();
            var formaPagamentoId = $("#formaPagamentoId").val();
            var condicaoParcelamentoId = $("#condicaoParcelamentoId").val();
            var categoriaId = $("#categoriaId").val();
            var centroCustoId = $("#centroCustoId").val();

            var tipoUrl = $('#tipoId').val() === "ContaPagar" ? "@Url.Action("Imprimir", "RelatorioCentroCustoCP")" : "@Url.Action("Imprimir", "RelatorioCentroCustoCR")";

            var url = tipoUrl + '?dataInicial=' + dataInicial +
                "&dataFinal=" + dataFinal +
                "&dataEmissaoInicial=" + dataEmissaoInicial +
                "&dataEmissaoFinal=" + dataEmissaoFinal +
                "&formaPagamentoId=" + formaPagamentoId +
                "&condicaoParcelamentoId=" + condicaoParcelamentoId +
                "&categoriaId=" + categoriaId +
                "&centroCustoId=" + centroCustoId +
                "&clienteId=" + clienteId;

            fnImprimir(url);
        }
    }
</script>