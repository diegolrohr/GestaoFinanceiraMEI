<script>
    @Html.Partial("Functions/_fnMain");

    var arrItems = [];
    var qtdItensSelecionados = 0;

    $().ready(function () {
        $('#btnViewBoletos').attr('disabled', 'disabled');        
        setupGridSelectEvents();
    });

    function setupGridSelectEvents() {
        fly01._.dtRemessa.on("select", function (e, dt, type, indexes) {            
            if (type !== undefined) {
                indexes.forEach(function (element, index, array) {
                    fnAtualizaCountSelecionados(1);
                });
            }
        }).on('deselect', function (e, dt, type, indexes) {
            if (type !== undefined) {
                indexes.forEach(function (element, index, array) {
                    fnAtualizaCountSelecionados(-1);
                });
            }
        });
    }

    function fnAtualizaCountSelecionados(count) {
        var countAtual = qtdItensSelecionados;
        countAtual = countAtual + (parseInt(count));
        qtdItensSelecionados = countAtual;

        fly01.fn.updateTextFields();
        $('#btnViewBoletos').attr('disabled', 'disabled');

        if (countAtual > 0 && countAtual <= 50) {
            $('#btnViewBoletos').removeAttr('disabled');
        }
        else if (countAtual <= 0) {
            $('#btnViewBoletos').attr('disabled', 'disabled');
        }
        else {
            $('#btnViewBoletos').attr('disabled', 'disabled');
        }
    }
</script>