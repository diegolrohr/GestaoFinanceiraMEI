<script>
    function fnFormReady() {
        //Na ediacao, se Calcula checked, habilita campos
        //ICMS
        fnShowICMS();
        //IPI
        fnShowIPI();
        //PIS
        fnShowPIS();
        //COFINS
        fnShowCOFINS();
        //ISS
        fnShowISS();
        //ST
        fnShowST();
        //CSLL
        fnShowCSLL();
        //INSS
        fnShowINSS();
        //ImpostoRenda
        fnShowImpostoRenda();

        fnCollapseImpostos();
    }

    function fnCollapseImpostos() {
        fnCollapseNFe();
        fnCollapseAmbos();
        fnCollapseNFSe();
        $('.collapsible').collapsible();
    }

    function fnCollapseNFe() {
        var nfe = createElem("div", { "class": "row" }, [
            document.getElementById("stLabelField"),
            document.getElementById("calculaSubstituicaoTributariaField"),
            document.getElementById("aplicaIpiBaseSTField"),
            document.getElementById("aplicaFreteBaseSTField"),
            document.getElementById("aplicaDespesaBaseSTField"),
            document.getElementById("icmsLabelField"),
            document.getElementById("calculaIcmsField"),
            document.getElementById("tipoTributacaoICMSField"),
            document.getElementById("calculaIcmsDifalField"),
            document.getElementById("aplicaIpiBaseIcmsField"),
            document.getElementById("aplicaFreteBaseIcmsField"),
            document.getElementById("aplicaDespesaBaseIcmsField"),
            document.getElementById("ipiLabelField"),
            document.getElementById("calculaIpiField"),
            document.getElementById("tipoTributacaoIPIField"),
            document.getElementById("aplicaFreteBaseIpiField"),
            document.getElementById("aplicaDespesaBaseIpiField")
        ]);

        $("#collapseNFeField").append(createElem("ul",
              { "class": "collapsible", "data-collapsible": "accordion" },
              createElem("li", null, [
                  createElem("div", { "class": "collapsible-header" }, createElem("h6", { "class": "orange-text light" }, "Impostos NF-e")),
                  createElem("div", { "class": "collapsible-body" }, nfe)
              ])
          ));
    }

    function fnCollapseAmbos() {
        var ambos = createElem("div", { "class": "row" }, [
            document.getElementById("pisLabelField"),
            document.getElementById("calculaPisField"),
            document.getElementById("retemPisField"),
            document.getElementById("tipoTributacaoPISField"),
            document.getElementById("aplicaFreteBasePisField"),
            document.getElementById("aplicaDespesaBasePisField"),
            document.getElementById("cofinsLabelField"),
            document.getElementById("calculaCofinsField"),
            document.getElementById("retemCofinsField"),
            document.getElementById("tipoTributacaoCOFINSField"),
            document.getElementById("aplicaFreteBaseCofinsField"),
            document.getElementById("aplicaDespesaBaseCofinsField"),
        ]);

        $("#collapseAmbosField").append(createElem("ul",
              { "class": "collapsible", "data-collapsible": "accordion" },
              createElem("li", null, [
                  createElem("div", { "class": "collapsible-header" }, createElem("h6", { "class": "orange-text light" }, "Impostos comuns NF-e e NFS-e")),
                  createElem("div", { "class": "collapsible-body" }, ambos)
              ])
          ));
    }

    function fnCollapseNFSe() {
        var nfse = createElem("div", { "class": "row" },[
            document.getElementById("issLabelField"),
            document.getElementById("calculaIssField"),
            document.getElementById("retemISSField"),
            document.getElementById("tipoTributacaoISSField"),
            document.getElementById("tipoPagamentoImpostoISSField"),
            document.getElementById("tipoCFPSField"),
            document.getElementById("csllLabelField"),
            document.getElementById("calculaCSLLField"),
            document.getElementById("retemCSLLField"),
            document.getElementById("inssLabelField"),
            document.getElementById("calculaINSSField"),
            document.getElementById("retemINSSField"),
            document.getElementById("impostoRendaLabelField"),
            document.getElementById("calculaImpostoRendaField"),
            document.getElementById("retemImpostoRendaField"),
        ]);

        $("#collapseNFSeField").append(createElem("ul",
              { "class": "collapsible", "data-collapsible": "accordion" },
              createElem("li", null, [
                  createElem("div", { "class": "collapsible-header" }, createElem("h6", { "class": "orange-text light" }, "Impostos NFS-e")),
                  createElem("div", { "class": "collapsible-body" }, nfse)
              ])
          ));
    }
</script>