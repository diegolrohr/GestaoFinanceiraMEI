<script>
    @Html.Partial("Functions/_fnMain");

    var arrItems = [];
    var qtdItensSelecionados = 0;

    $().ready(function () {
        $('#btnViewBoletos').attr('disabled', 'disabled');
        setupGridSelectEvents();
    });

    function setupGridSelectEvents() {
        //fly01._.dtRemessa.on('click', 'tr', function (e, dt, type, indexes) {
        //    var linha = $(this);
        //    var todasLinhas = fly01._.dtRemessa.$('tr.selected');

        //    linha.not(todasLinhas).toggleClass('selected');
        //    todasLinhas.not(linha).toggleClass('selected');
        //});

        fly01._.dtRemessa.on('select', function (e, dt, type, indexes) {
            debugger;
            var linha = this.rows[indexes];

            if ($(this.rows[indexes]).hasClass('selected'))
                $(this.rows[indexes]).removeClass('selected');

            //linha.addClass('selected');|
            $(this).addClass('selected');

            //if (type !== undefined) {
            //    indexes.forEach(function (element, index, array) {
            //        fnAtualizaCountSelecionados(1);
            //        $(this).removeClass('selected');
            //    });
            //}
        }).on('deselect', function (e, dt, type, indexes) {
            debugger;
            var linha = $(this);
            $(this).removeClass('selected');
            //linha.removeClass('selected');

            //if (type !== undefined) {
            //    indexes.forEach(function (element, index, array) {
            //        fnAtualizaCountSelecionados(-1);
            //        $(this).removeClass('selected');
            //    });
            //}
        });

        //fly01._.dtRemessa.on("select", function (e, dt, type, indexes) {
        //    debugger;
        //    if (type !== undefined) {
        //        indexes.forEach(function (element, index, array) {
        //            fnAtualizaCountSelecionados(1);
        //        });
        //    }
        //}).on('deselect', function (e, dt, type, indexes) {
        //    if (type !== undefined) {
        //        indexes.forEach(function (element, index, array) {
        //            fnAtualizaCountSelecionados(-1);
        //        });
        //    }
        //});
    }

    function fnAtualizaCountSelecionados(count) {
        var countAtual = qtdItensSelecionados;
        countAtual = countAtual + (parseInt(count));
        qtdItensSelecionados = countAtual;

        fly01.fn.updateTextFields();
        $('#btnViewBoletos').attr('disabled', 'disabled');

        if (countAtual > 0 && countAtual <= 50) {
            $('#btnViewBoletos').removeAttr('disabled');
        }
        else if (countAtual <= 0) {
            $('#btnViewBoletos').attr('disabled', 'disabled');
        }
        else {
            $('#btnViewBoletos').attr('disabled', 'disabled');
        }
    }
</script>